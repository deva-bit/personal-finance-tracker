services:
  # Dashboard Server
  - type: web
    name: expense-dashboard
    runtime: node
    rootDir: dashboard-server
    buildCommand: npm install
    startCommand: node index.js
    envVars:
      - key: DATABASE_URL
        sync: false  # Set to your Neon connection string
      - key: NODE_ENV
        value: production

  # WhatsApp Bot (Standalone - no n8n needed!)
  - type: web
    name: whatsapp-bot
    runtime: docker
    rootDir: whatsapp-bot
    dockerfilePath: ./Dockerfile
    envVars:
      - key: DATABASE_URL
        sync: false  # Set to your Neon connection string
      - key: DASHBOARD_URL
        sync: false  # Set to your dashboard URL, e.g., https://expense-dashboard.onrender.com
      - key: PUPPETEER_SKIP_CHROMIUM_DOWNLOAD
        value: "true"
